# path 简写方式：path|type|label|placeholder
# path 简写方式：path|type|label
# path 简写方式：path|type
# path 简写方式：path||label
# path 简写方式：path|||placeholder
# path 简写方式：|||placeholder

- step: 安装须知
- step: 机器列表
  work:
  - path: machines|list|机器列表
    work:
    - name
    - path: manual.ipAddresses|list
      work:
      - path: '||ip'
        rules: pattern|/^(\d{1}|[1-9]{1}\d{1}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1}|[1-9]{1}\d{1}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1}|[1-9]{1}\d{1}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1}|[1-9]{1}\d{1}|1\d\d|2[0-4]\d|25[0-5])$/|ip格式错误
    - manual.user|input
    - path: tags|multi-select
      options: 'k8s-master|k8s-worker: 这是k8s-worker|ceph'
- step: Storage
  work:
  - storage.ceph.$enable|switch
  - path: storage.ceph|group
    show: storage.ceph.$enable
    work:
    - path: cephHAMode|radio-button
      options: auto|enable|disable
    - clusterNetwork
    - publicNetwork
  - path: storage.dynamicLPV.dynamicLPVPaths
  - path: storage.defaultStorgeClass|radio-button
    options: ceph|dynamicLPV
    disabled: 'storage.ceph.$enable: (a) => !a'
    linkage:
    - condition: 'storage.ceph.$enable: (a) => !a'
      value: dynamicLPV
- step: OSS
  work:
  - oss.receiverEmail|||diamond@sensetime.com
  - oss.smtpAuthUsername|||alertmanager
  - oss.smtpAuthPassword|||password
  - oss.smtpFrom|||alertmanager@example.org
  - oss.smtpSmarthost|||localhost:25
- step: kubernetes
  work:
  - path: kubernetes.k8sHAMode|radio-button
    options: enable|disable
  - kubernetes.k8sWorkerNums|number||0
  - kubernetes.etcdDataDir|||password
  - kubernetes.kubeletRootDir|||/var/lib/kubelet
- step: docker
  work:
  - path: docker.insecureRegistry|list
    work:
    - placeholder: insecureRegistry
  - docker.graph|||/var/lib/docker
  - docker.logOptMaxSize|||100m
  - docker.logOptMaxFile|number||5
- step: pharos
  work:
  - path: pharos.metrics.pharosMetrics|radio-button
    options: enable|disable
  - path: pharos.metrics.mongodbSize|number||100
    show: 'pharos.metrics.pharosMetrics: "enable"'
  - path: pharos.metrics.mongodbReplicas|number||3
    show: 'pharos.metrics.pharosMetrics: "enable"'
  - path: pharos.log.pharosLog|radio-button
    options: enable|disable
    disabled: 'pharos.metrics.pharosMetrics: "disable"'
    linkage:
    - condition: 'pharos.metrics.pharosMetrics: "disable"'
      value: disable
  - path: pharos.log|group
    show: 'pharos.log.pharosLog: "enable"'
    sub:
      type: number
    work:
    - elasticsearchSize|||100
    - elasticsearchMemory|||8
    - elasticsearchReplicas|||3
    - kafkaSize|||100
    - kafkaMemory|||8
    - kafkaReplicas|||3
- step: gpu
  work:
  - path: gpu.nvidiaDriverVersion|radio-button
    options: '384.183-1|410.129-1'
  - path: gpu.virtualGPU|radio-button
    options: enable|disable
    disabled: 'gpu.nvidiaDriverVersion: "384.183-1"'
    linkage:
    - condition: 'gpu.nvidiaDriverVersion: "384.183-1"'
      value: disable
  - path: gpu.vGPUS|number||4
    disabled: 'gpu.nvidiaDriverVersion: "384.183-1"'
- step: diamond
  work:
  - path: diamond.diamondDNS|radio-button
    options: enable|disable
  - diamond.upstreamDNS|||8.8.8.8
  - path: diamond.offlineDockerRegistry|radio-button
    options: enable|disable
  - diamond.enableServices|switch
  - path: diamond.diamondNTP|radio-button
    options: enable|disable
  - path: diamond.upstreamNtpServer|list
    work:
    - placeholder: upstreamNtpServer
  - path: diamond.authentication.installIAM|radio-button
    options: enable|disable
  - path: diamond.authentication|group
    show: 'diamond.authentication.installIAM: "enable"'
    work:
    - mysql
    - host
    - port|number
    - user
    - password